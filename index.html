<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Torneo de Belenes</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f6f9;
        margin: 0;
        padding: 0;
    }

    header {
        background: #4a90e2;
        color: white;
        padding: 20px;
        text-align: center;
        font-size: 1.6rem;
        font-weight: bold;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .top-winner-box {
        margin: 20px;
        padding: 15px;
        background: white;
        border-radius: 14px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        font-size: 1.2rem;
        text-align: center;
    }

    table {
        width: 94%;
        margin: 20px auto;
        border-collapse: collapse;
        background: white;
        border-radius: 14px;
        overflow: hidden;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    th, td {
        padding: 12px;
        border-bottom: 1px solid #ddd;
        text-align: center;
    }

    th {
        background: #4a90e2;
        color: white;
    }

    tr:hover {
        background: #eef5ff;
    }

    img {
        width: 60px;
        height: 40px;
        object-fit: cover;
        cursor: pointer;
        border-radius: 6px;
    }

    /* Modal imagen grande */
    #modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0,0,0,0.8);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    #modal img {
        max-width: 90%;
        max-height: 90vh;
        width: auto;
        height: auto;
        border-radius: 14px;
        object-fit: contain;
        box-shadow: 0 0 20px black;
    }

    .galeria-btn {
        background: #4a90e2;
        color: white;
        border: none;
        padding: 8px 14px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.9rem;
    }

    .galeria-btn:hover {
        background: #357abd;
    }

    #galeriaModal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0,0,0,0.85);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9998;
    }

    .galeria-contenido {
        background: white;
        width: 90%;
        max-height: 90vh;
        padding: 15px;
        border-radius: 16px;
        overflow-y: auto;
    }

    #galeriaGrid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 10px;
    }

    .galeria-item {
        width: 100%;
        aspect-ratio: 1 / 1;
        overflow: hidden;
        border-radius: 12px;
        cursor: pointer;
        background: #000;
    }

    .galeria-item img,
    .galeria-item video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
	
	/* Bot√≥n cerrar modal */
	.cerrar-modal {
		position: absolute;
		top: 14px;
		right: 18px;
		font-size: 26px;
		color: white;
		background: rgba(0,0,0,0.6);
		border: none;
		border-radius: 50%;
		width: 44px;
		height: 44px;
		cursor: pointer;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.cerrar-modal:hover {
		background: rgba(0,0,0,0.85);
	}

</style>

</head>
<body>

<header>Torneo de Belenes ‚Ä¢ Familia Cabez√≥n</header>

<div class="top-winner-box" id="topWinner"></div>

<table>
    <thead>
        <tr>
            <th>A√±o</th>
            <th>Ganador</th>
            <th>Descripci√≥n</th>
            <th>Foto</th>
			<th>Galer√≠a</th>
        </tr>
    </thead>
    <tbody id="tabla"></tbody>
</table>

<!-- Modal para ampliar foto -->
<div id="modal">
    <button class="cerrar-modal" onclick="cerrarModal()">‚úï</button>
    <img id="modalImg">
</div>

<div id="galeriaModal">
    <button class="cerrar-modal" onclick="cerrarGaleria()">‚úï</button>

    <div class="galeria-contenido">
        <h2 id="galeriaTitulo"></h2>
        <div id="galeriaGrid"></div>
    </div>
</div>

<script>
const datos = [
    {a√±o:2025, ganador:"Vega y Nacho", descripcion:"Bel√©n Muyayo", foto:"Foto_2025"},
	{a√±o:2024, ganador:"Noelia y Nacho", descripcion:"Bel√©n de Animales 2¬∫", foto:"Foto_2024"},
	{a√±o:2023, ganador:"Ale y Manu", descripcion:"Bel√©n de Star Wars", foto:"Foto_2023"},
	{a√±o:2022, ganador:"Noelia y Nacho", descripcion:"Bel√©n de Animales 1¬∫", foto:"Foto_2022"},
	{a√±o:2021, ganador:"Ale y Manu", descripcion:"Bel√©n Port√°til Isla Pirata", foto:"Foto_2021"},
	{a√±o:2020, ganador:"COVID-19", descripcion:"COVID-19", foto:"Foto_2020"},
	{a√±o:2019, ganador:"Ale y Manu", descripcion:"Bel√©n Griego", foto:"Foto_2019"},
	{a√±o:2018, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2018"},
	{a√±o:2017, ganador:"Carmen y Cris", descripcion:"Bel√©n en el Polo Norte", foto:"Foto_2017"},
	{a√±o:2016, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2016"},
	{a√±o:2015, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2015"},
	{a√±o:2014, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2014"},
	{a√±o:2013, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2013"},
	{a√±o:2012, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2012"},
	{a√±o:2011, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2011"},
	{a√±o:2010, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2010"},
	{a√±o:2009, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2009"},
	{a√±o:2008, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2008"},
	{a√±o:2007, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2007"},
	{a√±o:2006, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2006"},
	{a√±o:2005, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2005"},
	{a√±o:2004, ganador:"Sin definir", descripcion:"Sin definir", foto:"Foto_2004"},
	{a√±o:2003, ganador:"Curra y Luis", descripcion:"Sin definir", foto:"Foto_2003"},
	{a√±o:2002, ganador:"Carmen y Cris", descripcion:"Sin definir", foto:"Foto_2002"},
	{a√±o:2001, ganador:"Curra y Luis", descripcion:"Sin definir", foto:"Foto_2001"},
	{a√±o:2000, ganador:"Gloria y Carlos", descripcion:"Sin definir", foto:"Foto_2000"},
	{a√±o:1999, ganador:"Pila y Pepe", descripcion:"Sin definir", foto:"Foto_1999"},
	{a√±o:1998, ganador:"Sole y Jos√©", descripcion:"Sin definir", foto:"Foto_1998"},
	{a√±o:1997, ganador:"Pachus y Luis", descripcion:"Sin definir", foto:"Foto_1997"},
	{a√±o:1996, ganador:"Pila y Pepe", descripcion:"Sin definir", foto:"Foto_1996"},
	{a√±o:1995, ganador:"Curra y Luis", descripcion:"Sin definir", foto:"Foto_1995"},
	{a√±o:1994, ganador:"Gloria y Carlos", descripcion:"Sin definir", foto:"Foto_1994"},
	{a√±o:1993, ganador:"Gloria y Carlos", descripcion:"Sin definir", foto:"Foto_1993"},
	{a√±o:1992, ganador:"Pila y Pepe", descripcion:"Sin definir", foto:"Foto_1992"},
	{a√±o:1991, ganador:"Curra y Luis", descripcion:"Sin definir", foto:"Foto_1991"},
	{a√±o:1990, ganador:"Curra y Luis", descripcion:"Sin definir", foto:"Foto_1990"}
	];

// Construir tabla
let tbody = document.getElementById("tabla");

datos.forEach(d => {
    tbody.innerHTML += `
    <tr>
        <td>${d.a√±o}</td>
        <td>${d.ganador}</td>
        <td>${d.descripcion}</td>
        <td><img src="fotos/${d.foto}.jpg" onclick="abrirModal('fotos/${d.foto}.jpg')"></td>
		<td><button class="galeria-btn" onclick="abrirGaleria(${d.a√±o})">üì∏ Ver</button>
</td>
    </tr>`;
});

// Contador victorias
const conteo = {};
datos.forEach(d => {
    if (d.ganador && d.ganador !== "Sin definir" && d.ganador !== "") {
        conteo[d.ganador] = (conteo[d.ganador] || 0) + 1;
    }
});

const ganadorTop = Object.entries(conteo).sort((a,b)=>b[1]-a[1])[0];

document.getElementById("topWinner").innerHTML =
    `<b>${ganadorTop[0]}:</b> 
     <b>${ganadorTop[1]} victorias</b> üèÜ`;

// Modal
function abrirModal(ruta) {
    const modal = document.getElementById("modal");

    // Limpiar contenido previo
    modal.innerHTML = "";

    const img = document.createElement("img");
    img.src = ruta;
    img.style.maxWidth = "90%";
    img.style.maxHeight = "90vh";
    img.style.borderRadius = "14px";
    img.style.boxShadow = "0 0 20px black";

    modal.appendChild(img);
    modal.style.display = "flex";
    modal.onclick = cerrarModal;
}

function cerrarModal() {
    const modal = document.getElementById("modal");
    modal.style.display = "none";
    modal.innerHTML = "";
}

function abrirGaleria(a√±o) {
    const grid = document.getElementById("galeriaGrid");
    grid.innerHTML = "";
    document.getElementById("galeriaTitulo").innerText = `Galer√≠a ${a√±o}`;

    for (let i = 1; i <= 7; i++) {
        const jpg = `galeria/${a√±o}/Belen_${i}.jpg`;
        const mp4 = `galeria/${a√±o}/Belen_${i}.mp4`;

        crearMiniatura("img", jpg);
        crearMiniatura("video", mp4);
    }

    document.getElementById("galeriaModal").style.display = "flex";
}

function crearMiniatura(tipo, ruta) {
    const div = document.createElement("div");
    div.className = "galeria-item";

    if (tipo === "img") {
        const img = document.createElement("img");
        img.src = ruta;

        img.onload = () => {
            div.onclick = () => abrirEnGrande("img", ruta);
            div.appendChild(img);
            document.getElementById("galeriaGrid").appendChild(div);
        };

        img.onerror = () => {}; // si no existe, no se a√±ade
    }

    if (tipo === "video") {
        const video = document.createElement("video");
        video.src = ruta;
        video.muted = true;
        video.playsInline = true;

        video.onloadeddata = () => {
            div.onclick = () => abrirEnGrande("video", ruta);
            div.appendChild(video);
            document.getElementById("galeriaGrid").appendChild(div);
        };

        video.onerror = () => {};
    }
}
function abrirEnGrande(tipo, ruta) {
    const modal = document.getElementById("modal");

    // Limpiar contenido anterior
    modal.innerHTML = "";

    if (tipo === "img") {
        const img = document.createElement("img");
        img.src = ruta;
        img.style.maxWidth = "90%";
        img.style.maxHeight = "90vh";
        img.style.borderRadius = "14px";
        img.style.boxShadow = "0 0 20px black";
        modal.appendChild(img);
    } else {
        const video = document.createElement("video");
        video.src = ruta;
        video.controls = true;
        video.autoplay = true;
        video.style.maxWidth = "90%";
        video.style.maxHeight = "90vh";
        modal.appendChild(video);
    }

    modal.style.display = "flex";
    modal.onclick = cerrarModal;
}
function cerrarGaleria() {
    document.getElementById("galeriaModal").style.display = "none";
}

</script>

</body>
</html>
